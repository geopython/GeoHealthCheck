<!doctype html>
<html lang="en">
	<head>
		<title>GeoHealthCheck - A Quality of Service Monitor for Geospatial Web Services</title>
		<meta charset="utf-8">
		<meta name="description" content="Monitor the health of your OGC OWS web services with GeoHealthCheck">
		<meta name="author" content="Just van den Broecke">
		<meta name="author" content="Tom Kralidis">
		<meta name="author" content="Hannes I. Reuter">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="revealjs/css/reveal.css">
		<link rel="stylesheet" href="revealjs/css/theme/night.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="revealjs/lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement('link');
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match(/print-pdf/gi) ? 'revealjs/css/print/pdf.css' : 'revealjs/css/print/paper.css';
			document.getElementsByTagName('head')[0].appendChild(link);
		</script>

		<!--[if lt IE 9]>
		<script src="revealjs/lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>
	<body>
		<div class="reveal">
    			<div class="slides">
				<section>
					<div><img src="media/ghc-logo.png" style="width: 880px; background-color:white; vertical-align: middle;"/></div>
					<h2>A Quality of Service Monitor for Geospatial Web Services</h2>
					<h3><a href="https://geohealthcheck.org" target="_new">geohealthcheck.org</a></h3>
				</section>
				<section id="table-of-contents">
					<h2>Table of contents</h2>
					<ul>
						<li>OGC OWS Monitoring Challenges</li>
						<li>GeoHealthCheck Overview and Tour</li>
						<li>Architecture</li>
						<li>Installation</li>
						<li>Extending GHC</li>
						<li>Roadmap</li>
						<li>Support</li>
					</ul>
				</section>
				<section id="ogc-ows-monitoring-challenges">
					<section>
						<h1>OGC OWS Monitoring Challenges</h1>
					</section>
					<section>
						<blockquote style="font-size: 4em">&ldquo;I see pink tiles!&rdquo;</blockquote>
					</section>
					<section data-background="media/ok-tiles.jpg">
						<h1 style="color: green; background: white;">What we expect</h1>
					</section>
					<section data-background="media/pink-tiles.jpg">
						<h1 style="color: red; background: white">What we see</h1>
					</section>
					<section data-background="media/except-xml.jpg">
						<h2 style="color: red; background: white">What we received</h2>
					</section>
					<section data-background="media/except-inimage.jpg">
						<h2 style="color: red; background: white">In Image Error Message</h2>
					</section>
					<section data-background="media/blank-map.jpg">
						<h2 style="color: red; background: white">"The Blank Stare"</h2>
					</section>
					<section>
						<h1 style="color: green">But our HTTP Monitor said: </h1>
						<h1 style="color: green">200 OK...</h1>
					</section>
					<section style="text-align: left;">
						<h2>GetCapabilities response OK, but</h2>
						<ul>
							<li>Capabilities doc may be static file</li>
							<li>No guarantee specific requests will work (WMS GetMap, WFS GetFeature, etc.)</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Time-based OGC Services</h2>
						<h3>SensorWeb Enablement (SWE)</h3>
						<ul>
							<li>Internet of Things (IoT)</li>
							<li>Sensor Observation Service (SOS)</li>
							<li>SensorThings API (STA)</li>
						</ul>
					</section>
					<section data-background="media/sos-viewer.jpg">
						<h2 style="color: green; background: white">SOS Viewer (52North)</h2>
					</section>
					<section data-background="media/sos-gaps.jpg">
						<h2 style="color: red; background: white">Gaps in SOS-Data</h2>
					</section>
					<section>
						<h2>Public "Uptime" services</h2>
						<ul>
							<li>Generic HTTP checking (keywords)</li>
							<li>OWS specifics need deeper inspection</li>
							<li>Not accessible: most critical OGC-services run internally on intranets</li>
						</ul>
					</section>
					<section>
						<h2>Value proposition</h2>
						<ul style="color: orange;">
							<li>OWS Aware Web Service Monitor</li>
							<li>Quality of Service (QoS) Checking</li>
							<li>with History Capture</li>
						</ul>
					</section>
				</section>
				<section id="geohealthcheck-overview-and-tour">
					<section>
						<h1>GeoHealthCheck Overview</h1>
						<h1>and Tour</h1>
					</section>
					<section>
						<h2>Overview</h2>
						<ul>
							<li>Founded by <a href="https://twitter.com/tomkralidis">Tom Kralidis</a></li>
							<li>Started in the air, literally!</li>
							<li>In flight en route to <a href="https://2014.foss4g.org">FOSS4G 2014</a> (YYZ -> YYC -> PDX)</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>A <a href="https://geopython.github.io/">geopython</a> Project</h2>
						<a href="https://geopython.github.io/"><img src="media/geopython.jpg" alt="geopython"/></a>
					</section>
					<section>
						<h1>Tour</h1>
						<h2><a href="https://demo.geohealthcheck.org">demo.geohealthcheck.org</a></h2>
					</section>
					<section data-background="media/walk-through1.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through2.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through3.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through4.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through5.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through6.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through7.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through8.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through9.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through10.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section id="walkthrough-analysis">
						<h1>Failing Resource!</h1>
						<h2>Root Cause Analysis</h2>
					</section>
					<section data-background="media/walk-through-notif.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/analysis-1-resource.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/analysis-2-resource-history.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/analysis-3-resource-history-detail.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
					<section data-background="media/walk-through-notif-ok.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
				</section>
				<section id="architecture">
					<section>
						<h1>Architecture</h1>
					</section>
				<section style="text-align: left;">
					<h2>GHC Parts</h2>
					<ul>
						<li>Python Webapp (Dashboard)</li>
						<li>HealthCheck Runner (Plugins!)</li>
						<li>Database</li>
					</ul>
				</section>
				<section data-background="media/ghc-parts.jpg">
					<!-- for printing -->
					<p>&nbsp;</p>
				</section>
				<section style="text-align: left;">
					<h2>Dashboard</h2>
					<ul>
						<li>Configure/Manage Healthchecks</li>
						<li>Flask Webapp</li>
						<li>Standard Python WSGI</li>
						<li>Run with Nginx, Apache2, Gunicorn...</li>
					</ul>
				</section>
				<section style="text-align: left;">
					<h2>HealthCheck Runner</h2>
					<ul>
						<li>Runs Healthchecks (duh!)</li>
						<li>Driven by Scheduler (APScheduler)</li>
						<li>Reporting (Down/Up, Daily Status)</li>
						<li>Notifications: email, webhook, ...</li>
					</ul>
				</section>
					<section style="text-align: left;">
						<h2>HealthCheck Model</h2>
						<ul>
							<li><strong>Resource</strong>: abstraction for (OWS or REST) API Endpoint</li>
							<li><strong>Resource</strong>: has (API endpoint) <strong>URL</strong></li>
							<li><strong>Probe</strong>: fires request(s) on (Resource) URL</li>
							<li><strong>Resource</strong> has 1-N <strong>Probes</strong></li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>HealthCheck Model</h2>
						<ul>
							<li><strong>Probe</strong> has N <strong>Checks</strong> (checklist)</li>
							<li>Each <strong>Check</strong>: evaluates <strong>Probe</strong> result aspect (e.g. response content)</li>
							<li>Check gives boolean verdict (success/fail)</li>
							<li>All Probe Checks: <strong>Probe Run Report</strong> (JSON)</li>
						</ul>
					</section>
				<section style="text-align: left;">
					<h2>Plugins - Probes and Checks</h2>
					<ul>
						<li>Standard (included in GHC)</li>
						<li>Custom (include your own!)</li>
						<li>Configurable via Web UI</li>
						<li>More later on...</li>
					</ul>
					</section>
					<section style="text-align: left;">
						<h2>Database</h2>
						<ul>
							<li>Entities
								<ul>
									<li>Users, Resources, Runs, Tags</li>
									<li>Probes, Checks, Recipients</li>
								</ul>
							<li>Per-Probe run schedule</li>
							<li>Maintains history (Runs)</li>
							<li>Multiple backends (via SQLAlchemy: default SQLite)</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Tags</h2>
						<ul>
							<li>For grouping Resources</li>
							<li>Provide/manage in Dashboard</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Data Model</h2>
						<img src="media/datamodel.png" alt="datamodel"/>
					</section>
        			</section>
				<section id="installation">
					<section style="text-align: left;">
						<h1>Installation</h1>
					</section>
					<section style="text-align: left;">
						<h2>Standard</h2>
						<ul>
							<li>Standard Python setup - <a href="https://docs.geohealthcheck.org">Instructions</a></li>
							<li>Paver for setup and management tasks</li>
							<li>Alembic with Flask-Migrate (for DB upgrades)</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Use Docker!</h2>
						<ul>
							<li><a href="https://hub.docker.com/r/geopython/geohealthcheck/" target="blank">Versioned GHC Images on DockerHub</a></li>
							<li><a href="https://docs.docker.com/compose" target="blank">Docker Compose support:</a> (complete stack: Webapp, DB and Jobs)</li>
							<li><a href="https://github.com/geopython/GeoHealthCheck/blob/master/docker/README.md" target="blank">Documentation</a></li>
							<li>GHC Up &amp; Running in minutes!!</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Settings</h2>
						<pre>
							<code class="hljs" data-trim contenteditable>
GHC_RETENTION_DAYS = 30
GHC_RUN_FREQUENCY = 'hourly'
GHC_SELF_REGISTER = False
GHC_NOTIFICATIONS = False
GHC_NOTIFICATIONS_VERBOSITY = True
GHC_ADMIN_EMAIL = 'you@example.com'
GHC_NOTIFICATIONS_EMAIL = ['you2@example.com', ..]
GHC_SITE_TITLE = 'GeoHealthCheck Demonstration'
GHC_SITE_URL = 'http://host'
GHC_SMTP = (email settings)
GHC_RELIABILITY_MATRIX = (when to show green/orange/red)
GHC_MAP = (map setup)
GHC_PLUGINS = (Built-in Probes and Checks)
GHC_USER_PLUGINS = (Probes and Checks, YOURS!)
GHC_PROBE_DEFAULTS = (Default Probe per Resource Type)
GHC_REQUIRE_WEBAPP_AUTH = False
							</code>
						</pre>
						<p>
							<a href="https://docs.geohealthcheck.org/en/latest/config.html#configuration-parameters">Full list of configuration parameters</a>
						</p>
					</section>
				</section>
				<section id="extending-ghc">
					<section style="text-align: left;">
						<h1>Extending GHC</h1>
						<h2>Plugin Development</h2>
					</section>
					<section style="text-align: left;">
						<h2>Plugin Model</h2>
						<ul>
							<li>Probes and Checks are Plugins</li>
							<li>Plugin class and/or modules in config
								<ul>
									<li>Built-in Plugins: GHC_PLUGINS=</li>
									<li>Your Plugins: GHC_USER_PLUGINS=</li>
								</ul>
							<li>Must be in $PYTHONPATH</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>Plugin Model</h2>
						<h3>Two Probe Types</h3>
						<ul>
							<li>Template (OWS) Requests</li>
							<li>Free-form: Probe Anything!</li>
						</ul>
					</section>
					<section style="text-align: left;">
							<h2><a href="https://github.com/geopython/GeoHealthCheck/tree/master/GeoHealthCheck/plugins">Time for some code!</a></h2>
							<h3>See also <a href="https://docs.geohealthcheck.org/en/latest/plugins.html">Plugin Docs</a></h3>
					</section>
					<section style="text-align: left;">
						<h2><a href="https://github.com/geopython/GeoHealthCheck/blob/master/GeoHealthCheck/plugins/probe/http.py">Simplest Probe Class</a></h2>
						<img src="media/plugin-httpget.jpg" alt="plugin-httpget"/>
					</section>
					<section style="text-align: left;">
						<h2><a href="https://github.com/geopython/GeoHealthCheck/blob/master/GeoHealthCheck/plugins/check/checks.py">Check Class HTTP Status</a></h2>
						<img src="media/plugin-checkstatus.jpg" alt="plugin-checkstatus"/>
					</section>
					<section style="text-align: left;">
						<h2><a href="https://github.com/geopython/GeoHealthCheck/blob/master/GeoHealthCheck/plugins/probe/owsgetcaps.py">Base GetCapabilities Probe</a></h2>
						<img src="media/plugin-owscaps.jpg" alt="plugin-owscaps"/>
					</section>
					<section style="text-align: left;">
						<h2><a href="https://github.com/geopython/GeoHealthCheck/blob/master/GeoHealthCheck/plugins/probe/owsgetcaps.py#L62">WMS GetCapabilities Probe</a></h2>
						<img src="media/plugin-wmscaps.jpg" alt="plugin-wmscaps"/>
					</section>
					<section data-background="media/walk-through8.jpg">
						<!-- for printing -->
						<p>&nbsp;</p>
					</section>
				</section>
				<section id="roadmap">
					<section>
						<h1>Roadmap</h1>
					</section>
					<section style="text-align: left;">
						<h2>Planned</h2>
						<ul>
							<li>REST API architecture</li>
							<li>UI renewal (Vue.js)</li>
							<li>Monitoring tools integration (Icinga, Munin, Prometheus etc.)</li>
							<li>OGC Quality of Service and Experience Domain Working Group (QoSE DWG)</li>
						</ul>
					</section>
					<section style="text-align: left;">
						<h2>You Can Help!</h2>
						<ul>
							<li>Coding (Plugins!)</li>
							<li>Testing</li>
							<li>Documentation</li>
							<li>User Stories</li>
							<li>Sponsored Development</li>
							<li>Translation</li>
						</ul>
					</section>
				</section>
				<section id="support">
					<section>
						<h1>Support</h1>
					</section>
					<section style="text-align: left;">
						<h1>Shameless Plug</h1>
						<h2>Cloud Subscription</h2>
					</section>
					<section>
						<img src="media/geoqos.com_home.jpg" alt="geoqos.com" />
						<h2 style="color: red; background: white">geoqos.com</h2>
					</section>
				</section>
				<section>
					<h2>Links</h2>
					<ul>
						<li>Home: <a href="https://geohealthcheck.org" target="_blank">geohealthcheck.org</a></li>
						<li>Docs: <a href="https://docs.geohealthcheck.org" target="_blank">docs.geohealthcheck.org</a></li>
						<li>Demo: <a href="https://demo.geohealthcheck.org" target="_blank">demo.geohealthcheck.org</a></li>
						<li>GitHub: <a href="https://github.com/geopython/GeoHealthCheck" target="_blank">github.com/geopython/GeoHealthCheck</a></li>
						<li>Docker: <a href="https://hub.docker.com/r/geopython/GeoHealthCheck" target="_blank">hub.docker.com/r/geopython/GeoHealthCheck</a></li>
						<li>Chat: <a href="https://gitter.im/geopython/GeoHealthCheck" target="_blank">gitter.im/geopython/GeoHealthCheck</a></li>
						<li>Presentation: <a href="https://geohealthcheck.org/presentation">geohealthcheck.org/presentation</a></li>
					</ul>
				</section>
				<section>
					<h1>Thank you!</h1>
					<p>
						<a href="https://twitter.com/tomkralidis">@tomkralidis</a>
						<a href="https://twitter.com/justb4">@justb4</a>
						<a href="https://twitter.com/hireuter">@hireuter</a>
					</p>
				</section>
			</div>
		</div>
		<script src="revealjs/lib/js/head.min.js"></script>
		<script src="revealjs/js/reveal.js"></script>
		<script>
			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,
				transition: 'slide', // none/fade/slide/convex/concave/zoom
				// Optional reveal.js plugins
				dependencies: [ {
					src: 'revealjs/lib/js/classList.js', condition: function () {
						return !document.body.classList;
					}
				}, {
					src: 'revealjs/plugin/markdown/marked.js', condition: function () {
						return !!document.querySelector('[data-markdown]');
					}
				}, {
					src: 'revealjs/plugin/markdown/markdown.js', condition: function () {
						return !!document.querySelector('[data-markdown]');
						}
				}, {
					src: 'revealjs/plugin/highlight/highlight.js', async: true, callback: function () {
						hljs.initHighlightingOnLoad();
					}
				},
				{src: 'revealjs/plugin/zoom-js/zoom.js', async: true},
				{src: 'revealjs/plugin/notes/notes.js', async: true}
				]
			});
		</script>
	</body>
</html>
